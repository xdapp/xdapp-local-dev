<template>
<div>
  <title>{{$t('index.titleDashboard')}}</title>
  <el-row :gutter="20">
    <el-col :lg="6" :md="12" :sm="12">
      <icon-card color="warning" icon="fa-chart-line" :value="13300" :title="$t('index.online')">
        <i class="fa fa-flag"></i> {{$t('yesterday')}}: 123456
        <span class="date-input" slot="stats-right">
                    <el-date-picker :picker-options="pickerOptions" style="width:100px" value-format="yyyy-MM-dd" :clearable="false" :editable="false" v-model="toDay" type="date"></el-date-picker>
                </span>
      </icon-card>
    </el-col>
    <el-col :lg="6" :md="12" :sm="12">
      <icon-card color="success" icon="fa-user-plus" :value="8998" :title="$t('index.newRoles')">
        <i class="fa fa-user"></i> {{$t('yesterday')}}: 123456
      </icon-card>
    </el-col>
    <el-col :lg="6" :md="12" :sm="12">
      <icon-card color="danger" icon="fa-money-check" :value="139950" :title="$t('index.revenueToday')">
        <i class="fa fa-flag-checkered"></i> {{$t('yesterday')}}: {{revenueYesterday.toLocaleString()}}
      </icon-card>
    </el-col>
    <el-col :lg="6" :md="12" :sm="12">
      <icon-card color="info" icon="fa-cubes" :value="total" :title="$t('index.allRevenue')">
        <i class="fa fa-book"></i> {{$t('thisMonth')}}: {{revenueLastMonth.toLocaleString()}}
      </icon-card>
    </el-col>
  </el-row>

  <el-row :gutter="20">
    <el-col :lg="8" :md="12" :sm="24">
      <card-chart
        color="success"
        :title="$t('index.dailyRevenue')"
        :categories="['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec']"
        :data="[43934, 52503, 57177, 69658, 97031, 119931, 137133, 154175]"
      >
        <span class="color-danger"><i class="fa fa-long-arrow-up"></i> 55% </span> {{$t('index.compareSameTimeOfYesterday')}}
        <span slot="stats">{{$t('index.updatedXMinutesAgo', {x: 4})}}</span>
      </card-chart>
    </el-col>
    <el-col :lg="8" :md="12" :sm="24">
      <card-chart
        color="warning"
        type="column"
        suffix="%"
        :title="$t('index.nextDayRetentionRate')"
        :categories="['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec']"
        :data="[60, 61, 75, 67, 80, 68, 76, 67, 80, 68, 76, 80]"
      >
        {{$t('index.proportionNewRolesOnTheNextDay')}}
        <span slot="stats">{{$t('index.updatedXMinutesAgo', {x: 10})}}</span>
      </card-chart>
    </el-col>
    <el-col :lg="8" :md="12" :sm="24">
      <card-chart
        color="danger"
        type="area"
        :title="$t('index.dailyLogin')"
        :categories="['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec']"
        :data="[60, 61, 75, 67, 80, 68, 76, 67, 80, 68, 76, 80]"
      >
        <span class="color-danger"><i class="fa fa-long-arrow-up"></i> 15% </span> {{$t('index.compareSameTimeOfYesterday')}}
        <span slot="stats">{{$t('index.updatedXMinutesAgo', {x: 5})}} {{$t('index.maxOnline')}}: 33013</span>
      </card-chart>
    </el-col>
  </el-row>

  <el-row>
    <el-col :row="24">
      <div class="card">
        <div class="card-header card-header-icon">
          <div class="el-col el-col-12">
            <div class="card-icon">
              <i class="fa fa-futbol"></i>
            </div>
            <h4 class="card-title">{{$t('index.onlineToday')}}</h4>
          </div>
        </div>
        <high-chart class="card-body" style="height: 320px" :option="onlineOpt"></high-chart>
      </div>
    </el-col>
  </el-row>

  <el-row :gutter="20">
    <el-col :lg="12" :md="24" :sm="24">
      <Card title="标题" type="purple">
        abc
      </Card>
    </el-col>
    <el-col :lg="12" :md="24" :sm="24">
      <Card title="标题" type="danger" icon="fa fa-battery-bolt">
        abc
      </Card>
    </el-col>
  </el-row>
</div>
</template>

<style lang="scss" scoped>
.date-input {
  height: 22px;
  overflow: hidden;
  display: block;

  input {
    cursor: pointer;
    color: #999;
    background-image: none;
    font-size: 12px;
  }

  > .el-date-editor {
    cursor: pointer;
    margin: -10px auto auto -10px;
  }
}
</style>

<script>
// components 为系统自带的组件
import iconCard from 'components/iconCard.vue'
import cardChart from 'components/cardChart.vue'
import highChart from 'components/highChart.vue'
import Card from 'components/card.vue'

export default {
  components: {
    iconCard,
    cardChart,
    highChart,
    Card,
  },
  data() {
    const online = {
      "c": ["00:00-00:05", "00:05-00:10", "00:10-00:15", "00:15-00:20", "00:20-00:25", "00:25-00:30", "00:30-00:35", "00:35-00:40", "00:40-00:45", "00:45-00:50", "00:50-00:55", "00:55-01:00", "01:00-01:05", "01:05-01:10", "01:10-01:15", "01:15-01:20", "01:20-01:25", "01:25-01:30", "01:30-01:35", "01:35-01:40", "01:40-01:45", "01:45-01:50", "01:50-01:55", "01:55-02:00", "02:00-02:05", "02:05-02:10", "02:10-02:15", "02:15-02:20", "02:20-02:25", "02:25-02:30", "02:30-02:35", "02:35-02:40", "02:40-02:45", "02:45-02:50", "02:50-02:55", "02:55-03:00", "03:00-03:05", "03:05-03:10", "03:10-03:15", "03:15-03:20", "03:20-03:25", "03:25-03:30", "03:30-03:35", "03:35-03:40", "03:40-03:45", "03:45-03:50", "03:50-03:55", "03:55-04:00", "04:00-04:05", "04:05-04:10", "04:10-04:15", "04:15-04:20", "04:20-04:25", "04:25-04:30", "04:30-04:35", "04:35-04:40", "04:40-04:45", "04:45-04:50", "04:50-04:55", "04:55-05:00", "05:00-05:05", "05:05-05:10", "05:10-05:15", "05:15-05:20", "05:20-05:25", "05:25-05:30", "05:30-05:35", "05:35-05:40", "05:40-05:45", "05:45-05:50", "05:50-05:55", "05:55-06:00", "06:00-06:05", "06:05-06:10", "06:10-06:15", "06:15-06:20", "06:20-06:25", "06:25-06:30", "06:30-06:35", "06:35-06:40", "06:40-06:45", "06:45-06:50", "06:50-06:55", "06:55-07:00", "07:00-07:05", "07:05-07:10", "07:10-07:15", "07:15-07:20", "07:20-07:25", "07:25-07:30", "07:30-07:35", "07:35-07:40", "07:40-07:45", "07:45-07:50", "07:50-07:55", "07:55-08:00", "08:00-08:05", "08:05-08:10", "08:10-08:15", "08:15-08:20", "08:20-08:25", "08:25-08:30", "08:30-08:35", "08:35-08:40", "08:40-08:45", "08:45-08:50", "08:50-08:55", "08:55-09:00", "09:00-09:05", "09:05-09:10", "09:10-09:15", "09:15-09:20", "09:20-09:25", "09:25-09:30", "09:30-09:35", "09:35-09:40", "09:40-09:45", "09:45-09:50", "09:50-09:55", "09:55-10:00", "10:00-10:05", "10:05-10:10", "10:10-10:15", "10:15-10:20", "10:20-10:25", "10:25-10:30", "10:30-10:35", "10:35-10:40", "10:40-10:45", "10:45-10:50", "10:50-10:55", "10:55-11:00", "11:00-11:05", "11:05-11:10", "11:10-11:15", "11:15-11:20", "11:20-11:25", "11:25-11:30", "11:30-11:35", "11:35-11:40", "11:40-11:45", "11:45-11:50", "11:50-11:55", "11:55-12:00", "12:00-12:05", "12:05-12:10", "12:10-12:15", "12:15-12:20", "12:20-12:25", "12:25-12:30", "12:30-12:35", "12:35-12:40", "12:40-12:45", "12:45-12:50", "12:50-12:55", "12:55-13:00", "13:00-13:05", "13:05-13:10", "13:10-13:15", "13:15-13:20", "13:20-13:25", "13:25-13:30", "13:30-13:35", "13:35-13:40", "13:40-13:45", "13:45-13:50", "13:50-13:55", "13:55-14:00", "14:00-14:05", "14:05-14:10", "14:10-14:15", "14:15-14:20", "14:20-14:25", "14:25-14:30", "14:30-14:35", "14:35-14:40", "14:40-14:45", "14:45-14:50", "14:50-14:55", "14:55-15:00", "15:00-15:05", "15:05-15:10", "15:10-15:15", "15:15-15:20", "15:20-15:25", "15:25-15:30", "15:30-15:35", "15:35-15:40", "15:40-15:45", "15:45-15:50", "15:50-15:55", "15:55-16:00", "16:00-16:05", "16:05-16:10", "16:10-16:15", "16:15-16:20", "16:20-16:25", "16:25-16:30", "16:30-16:35", "16:35-16:40", "16:40-16:45", "16:45-16:50", "16:50-16:55", "16:55-17:00", "17:00-17:05", "17:05-17:10", "17:10-17:15", "17:15-17:20", "17:20-17:25", "17:25-17:30", "17:30-17:35", "17:35-17:40", "17:40-17:45", "17:45-17:50", "17:50-17:55", "17:55-18:00", "18:00-18:05", "18:05-18:10", "18:10-18:15", "18:15-18:20", "18:20-18:25", "18:25-18:30", "18:30-18:35", "18:35-18:40", "18:40-18:45", "18:45-18:50", "18:50-18:55", "18:55-19:00", "19:00-19:05", "19:05-19:10", "19:10-19:15", "19:15-19:20", "19:20-19:25", "19:25-19:30", "19:30-19:35", "19:35-19:40", "19:40-19:45", "19:45-19:50", "19:50-19:55", "19:55-20:00", "20:00-20:05", "20:05-20:10", "20:10-20:15", "20:15-20:20", "20:20-20:25", "20:25-20:30", "20:30-20:35", "20:35-20:40", "20:40-20:45", "20:45-20:50", "20:50-20:55", "20:55-21:00", "21:00-21:05", "21:05-21:10", "21:10-21:15", "21:15-21:20", "21:20-21:25", "21:25-21:30", "21:30-21:35", "21:35-21:40", "21:40-21:45", "21:45-21:50", "21:50-21:55", "21:55-22:00", "22:00-22:05", "22:05-22:10", "22:10-22:15", "22:15-22:20", "22:20-22:25", "22:25-22:30", "22:30-22:35", "22:35-22:40", "22:40-22:45", "22:45-22:50", "22:50-22:55", "22:55-23:00", "23:00-23:05", "23:05-23:10", "23:10-23:15", "23:15-23:20", "23:20-23:25", "23:25-23:30", "23:30-23:35", "23:35-23:40", "23:40-23:45", "23:45-23:50", "23:50-23:55", "23:55-00:00"],
      "today": [2503, 2403, 2331, 2275, 1832, 1717, 1613, 1514, 1436, 1358, 1292, 1189, 1152, 1101, 1056, 1015, 963, 919, 852, 820, 793, 753, 717, 723, 701, 663, 628, 624, 610, 568, 560, 522, 516, 492, 524, 554, 746, 1286, 1415, 1465, 1432, 1430, 1386, 1309, 1271, 1223, 1164, 1108, 1112, 1098, 1080, 1066, 1068, 1035, 1005, 982, 977, 977, 980, 983, 1012, 1018, 1047, 1066, 1101, 1183, 1245, 1316, 1348, 1421, 1521, 1583, 1685, 1847, 1983, 2116, 2235, 2339, 2440, 2583, 2721, 2801, 2921, 3014, 3115, 3204, 3291, 3375, 3396, 3482, 3523, 3647, 3661, 3701, 3778, 3956, 4894, 5381, 5260, 5102, 4923, 4787, 4659, 4602, 4553, 4506, 4419, 4377, 4301, 4259, 4224, 4206, 4126, 4090, 4094, 4055, 3949, 3928, 3966, 3878, 3890, 3916, 3929, 3947, 3900, 3952, 3945, 3931, 3879, 3861, 3887, 3889, 3935, 3904, 3898, 3963, 3936, 3913, 3928, 3829, 3859, 3885, 3953, 4103, 4784, 5671, 5662, 5568, 5523, 5509, 5622, 5801, 5924, 5900, 5766, 5717, 5615, 5461, 5239, 4974, 4872, 4639, 4485, 4385, 4202, 4068, 4005, 3948, 3823, 3615, 3453, 3428, 3324, 3280, 3254, 3215, 3171, 3141, 3161, 3110, 3138, 3129, 3142, 3100, 2960, 2896, 2899, 2825, 2819, 2812, 2795, 2786, 3087, 3446, 3306, 3191, 3097, 3052, 2987, 2895, 2902, 2867, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null],
      "yesterday": [2044, 1928, 1896, 1896, 1450, 1369, 1251, 1238, 1151, 1099, 1151, 1183, 1179, 1103, 1058, 1027, 982, 936, 888, 827, 796, 748, 722, 687, 656, 666, 631, 650, 534, 531, 507, 476, 453, 441, 452, 494, 681, 1232, 1409, 1513, 1512, 1488, 1479, 1463, 1447, 1383, 1328, 1329, 1310, 1268, 1232, 1212, 1171, 1137, 1102, 1092, 1088, 1090, 1101, 1149, 1151, 1197, 1224, 1277, 1290, 1357, 1424, 1507, 1582, 1652, 1722, 1840, 1926, 2079, 2211, 2324, 2454, 2558, 2661, 2803, 2934, 3064, 3178, 3308, 3398, 3518, 3608, 3699, 3770, 3833, 3904, 3930, 4035, 4167, 4244, 4441, 5238, 5576, 5485, 5393, 5193, 5098, 5047, 4912, 4863, 4843, 4835, 4820, 4785, 4781, 4786, 4663, 4625, 4590, 4601, 4542, 4542, 4517, 4496, 4504, 4506, 4565, 4524, 4511, 4499, 4497, 4482, 4479, 4454, 4443, 4476, 4492, 4471, 4449, 4503, 4471, 4481, 4447, 4360, 4344, 4369, 4363, 4456, 4585, 5211, 5975, 5980, 5973, 6014, 6078, 6120, 6262, 6343, 6380, 6248, 6192, 6077, 5781, 5549, 5369, 5277, 5028, 4921, 4752, 4592, 4474, 4330, 4263, 4197, 4064, 4003, 3882, 3747, 3685, 3620, 3607, 3582, 3587, 3629, 3510, 3474, 3468, 3472, 3475, 3295, 3252, 3200, 3194, 3160, 3132, 3135, 3157, 3371, 3768, 3615, 3529, 3400, 3343, 3246, 3222, 3161, 3091, 3097, 3109, 3082, 3057, 3037, 3037, 3067, 3073, 3065, 3106, 3217, 3232, 3298, 3381, 3482, 3883, 3931, 4042, 4081, 4183, 4228, 4337, 4374, 4458, 4427, 4476, 4490, 4492, 4523, 4503, 4558, 4512, 4601, 4573, 4517, 4597, 4647, 4751, 4997, 5637, 5615, 5615, 5468, 5442, 5355, 5323, 5308, 5273, 5263, 5315, 5382, 5236, 5164, 5133, 4910, 4832, 4724, 4632, 4532, 4504, 4480, 4384, 4366, 4212, 4126, 4026, 3880, 3844, 3771, 3666, 3620, 3554, 3822, 3807, 3789, 3610, 3447, 3339, 3184, 3004, 2932, 2817, 2745, 2598, 2485, 2455],
      "lastweek": [2279, 2256, 2188, 2167, 1845, 1749, 1619, 1520, 1405, 1310, 1238, 1168, 1133, 1066, 1036, 995, 981, 933, 903, 873, 839, 800, 765, 716, 682, 644, 636, 611, 572, 572, 554, 537, 524, 525, 516, 607, 828, 1483, 1646, 1757, 1757, 1778, 1748, 1695, 1663, 1576, 1496, 1432, 1412, 1402, 1382, 1332, 1287, 1258, 1229, 1184, 1178, 1173, 1152, 1158, 1177, 1249, 1290, 1345, 1430, 1515, 1566, 1656, 1744, 1811, 1855, 1948, 2050, 2181, 2321, 2455, 2567, 2716, 2877, 3057, 3167, 3279, 3383, 3537, 3600, 3696, 3772, 3832, 3927, 4058, 4128, 4234, 4247, 4264, 4286, 4516, 5531, 5752, 5598, 5471, 5264, 5097, 4936, 4902, 4810, 4794, 4757, 4712, 4687, 4579, 4542, 4399, 4329, 4294, 4255, 4184, 4136, 4108, 4174, 4200, 4230, 4263, 4235, 4222, 4134, 4062, 4028, 4044, 4040, 4044, 4030, 4042, 4031, 3978, 3987, 4036, 4019, 4029, 3967, 3892, 3924, 3977, 4137, 4270, 5063, 5877, 5837, 5807, 5819, 5857, 5989, 6229, 6238, 6218, 6227, 6049, 5950, 5756, 5506, 5338, 5139, 4942, 4801, 4590, 4434, 4276, 4199, 4024, 3964, 3961, 3864, 3845, 3651, 3614, 3536, 3466, 3444, 3352, 3395, 3403, 3287, 3366, 3413, 3411, 3152, 3084, 3056, 2897, 2932, 2992, 3057, 3135, 3323, 3649, 3471, 3431, 3377, 3317, 3066, 2978, 2953, 2890, 2866, 2880, 2898, 2944, 3003, 2959, 2941, 2972, 2940, 2997, 2995, 3049, 3134, 3186, 3221, 3732, 3927, 4030, 4086, 4120, 4134, 4333, 4421, 4405, 4365, 4352, 4387, 4411, 4332, 4366, 4378, 4415, 4335, 4338, 4304, 4364, 4518, 4923, 6661, 8072, 8219, 8054, 7793, 7358, 6690, 6142, 5809, 5561, 5440, 5383, 5080, 4990, 4940, 4850, 4436, 4347, 4360, 4338, 4369, 4206, 4135, 4057, 4093, 4083, 3987, 3970, 3973, 3934, 3674, 3663, 3624, 3589, 3550, 3556, 3477, 3396, 3340, 3105, 3037, 2922, 2801, 2729, 2621, 2549, 2517, 2476],
    }
    let onlineOpt = {
      chart: {
        type: 'area',
      },
      title: false,
      xAxis: {
        labels: {
          step: 50,
          maxStaggerLines: 1,
        },
        tickLength: 0,
        categories: online['c'],
      },
      yAxis: {
        title: {
          text: this.$t('index.online'),
        },
      },
      tooltip: {
        shared: true,
      },
      plotOptions: {
        area: {
          lineWidth: 1,
          states: {
            hover: {
              lineWidth: 1,
            },
          },
          marker: {
            enabled: false
          },
        },
      },
      series: [
        {
          zIndex: 3,
          name: this.$t('index.onlineToday'),
          color: '#2ab5ff',
          fillOpacity: 0.5,
          data: online['today'],
        }, {
          zIndex: 2,
          name: this.$t('index.onlineYesterday'),
          color: '#43a047',
          fillOpacity: 0,
          data: online['yesterday'],
        }, {
          zIndex: 1,
          name: this.$t('index.onlineLastWeek'),
          color: '#ebe966',
          fillOpacity: 0.2,
          data: online['lastweek'],
        },
      ],
    }

    return {
      onlineOpt: onlineOpt,
      toDay: new Date(),
      total: 1345634235,
      revenueYesterday: 492034,
      estimatedrevenue: 1092032,
      revenueLastMonth: 123123833,   // 上月充值
      pickerOptions: {
        disabledDate(time) {
          return time.getTime() > Date.now()
        },
      },
    }
  },
}
</script>